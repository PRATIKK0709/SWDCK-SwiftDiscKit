{
  "title": "12 Error Handling",
  "content": "# Error Handling\n\nNetwork requests can fail, permissions can be missing, and Discord can apply rate limits. SWDCK uses Swift's error handling system (`throws`) to help you catch and manage these situations.\n\n## `DiscordError`\n\nMost failures in SWDCK throw a `DiscordError` enum. This includes both local validation errors and errors returned by the Discord API.\n\n### Common Error Cases\n\n| Case | Description |\n|------|-------------|\n| `.invalidToken` | Your bot token is wrong or expired. |\n| `.rateLimited(retryAfter:)` | You are sending requests too fast. Wait `retryAfter` seconds. |\n| `.missingPermissions(endpoint:)` | The bot doesn't have the permission required for that action. |\n| `.resourceNotFound(endpoint:)` | The ID you provided (channel, user, etc.) doesn't exist. |\n| `.decodingFailed(type:underlying:)` | Discord sent unexpected data that the library couldn't parse. |\n\n---\n\n## Handling Errors in Async/Await\n\nSince most methods are `async`, you should wrap them in `do-catch` blocks.\n\n```swift\ndo {\n    try await bot.sendMessage(to: \"invalid_id\", content: \"Hello\")\n} catch let error as DiscordError {\n    switch error {\n    case .missingPermissions:\n        print(\"I don't have permission to send messages there!\")\n    case .resourceNotFound:\n        print(\"That channel doesn't exist.\")\n    default:\n        print(\"Discord Error: \\(error.localizedDescription)\")\n    }\n} catch {\n    print(\"Unexpected error: \\(error)\")\n}\n```\n\n---\n\n## Handling Rate Limits\n\nSWDCK does not automatically retry rate-limited requests yet. When you receive a `.rateLimited` error, it is your responsibility to wait and retry if desired.\n\n```swift\nfunc safeSend(_ content: String, to channelId: String) async {\n    do {\n        try await bot.sendMessage(to: channelId, content: content)\n    } catch DiscordError.rateLimited(let retryAfter) {\n        print(\"Rate limited! Retrying in \\(retryAfter) seconds...\")\n        try? await Task.sleep(nanoseconds: UInt64(retryAfter * 1_000_000_000))\n        await safeSend(content, to: channelId) // Recursive retry\n    } catch {\n        print(\"Failed to send: \\(error)\")\n    }\n}\n```\n\n---\n\n## Gateway Disconnections\n\nIf the WebSocket connection drops, SWDCK will attempt to reconnect automatically. You can monitor these events by listening for `onGatewayDisconnect` (if implemented) or by checking the bot's logs.\n\n> \ud83d\udca1 **Tip:** Always check your bot's logs if it suddenly stops responding. SWDCK logs detailed error information to the console.\n\n> **Next:** [Configuration & Best Practices](./configuration-best-practices)\n"
}