{
  "title": "13 Configuration Best Practices",
  "content": "# Configuration & Best Practices\n\nBuilding a reliable bot requires more than just knowing the API. Following these best practices will help you create a stable and secure application.\n\n## Storing Your Token Safely\n\n**Never hardcode your bot token.** If you push your code to GitHub, anyone can see it.\n\n### Recommended: Environment Variables\nUse a library like `SwiftDotenv` or simply read from `ProcessInfo`.\n\n```swift\nlet env = ProcessInfo.processInfo.environment\nguard let token = env[\"DISCORD_TOKEN\"] else {\n    fatalError(\"Missing DISCORD_TOKEN in environment\")\n}\nlet bot = DiscordBot(token: token, ...)\n```\n\n---\n\n## Command Sync Mode\n\nSWDCK offers two modes for syncing slash commands:\n- `.global` (Default): Syncs all registered `slashCommand`s to Discord globally. Note that global updates can take up to an hour to propagate.\n- `.manual`: You manually control when and where commands are synced using `syncCommandsIfNeeded` or `syncCommands`.\n\n---\n\n## Sharding\n\nSharding is a way to split your bot's connection across multiple WebSocket connections. This is required by Discord for bots in 2,500+ servers.\n**SWDCK handles sharding automatically.** When you call `bot.start()`, the library requests the recommended number of shards from Discord and scales accordingly.\n\n---\n\n## Performance & Concurrency\n\n### Use Actors for State\nIf your bot needs to keep track of data (like a simple leveling system or a game state), use Swift **Actors** to ensure thread safety.\n\n```swift\nactor BotStats {\n    var messagesSeen = 0\n    func increment() { messagesSeen += 1 }\n}\n```\n\n### Don't Block the Gateway\nThe gateway connection is sensitive. Avoid running long-running, CPU-intensive tasks directly in an event handler. Instead, use a background `Task`.\n\n```swift\nbot.onMessage { message in\n    Task.detached(priority: .background) {\n        // Perform heavy work here\n    }\n}\n```\n\n---\n\n## Logging\n\nSWDCK uses a built-in logging system. You can see detailed information about the Gateway connection and REST requests in your console. \n\n> \ud83d\udca1 **Tip:** Pay attention to logs starting with `[SWDCK]` as they often contain clues about why a connection failed or why a command wasn't registered.\n\n---\n\n## Summary Checklist\n\n- [ ] Token is stored in a secure environment variable.\n- [ ] Required Gateway Intents are enabled in the Developer Portal.\n- [ ] Message handlers ignore other bots (`!message.author.bot`).\n- [ ] Long-running tasks are moved to background tasks.\n- [ ] Errors are properly handled with `do-catch` blocks.\n\n> **Next:** [Full Example Bot](./example-bot)\n"
}