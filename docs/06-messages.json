{
  "title": "06 Messages",
  "content": "# Messages\n\nMessages are the primary way users interact with your bot. In SWDCK, the `Message` object contains everything you need to know about a message and provides convenient helpers to respond.\n\n## Receiving a Message\n\nThe `onMessage` handler is triggered whenever a message is sent in a channel your bot can see.\n\n```swift\nbot.onMessage { message in\n    print(\"Author: \\(message.author.username)\")\n    print(\"Content: \\(message.content)\")\n    print(\"Channel ID: \\(message.channelId)\")\n}\n```\n\n### Key Properties\n\nThe `Message` object exposes several important fields:\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `id` | `String` | The unique ID of the message. |\n| `content` | `String` | The text content of the message. |\n| `author` | `DiscordUser` | The user who sent the message. |\n| `channelId` | `String` | The ID of the channel where it was sent. |\n| `guildId` | `String?` | The ID of the guild (if not a DM). |\n| `timestamp` | `String` | When the message was sent (ISO8601). |\n\n---\n\n## Best Practice: Ignoring Bots\n\nYou should almost always ignore messages sent by bots (including your own bot) to prevent infinite loops.\n\n```swift\nbot.onMessage { message in\n    guard !message.author.bot else { return }\n    // Your logic here\n}\n```\n\n---\n\n## Sending Messages\n\nYou can send messages using the `DiscordBot` instance or by responding to an existing message.\n\n### Sending to a Specific Channel\nUse `bot.sendMessage(to:content:)` to send a message to any channel if you have the ID.\n\n```swift\ntry await bot.sendMessage(to: \"123456789\", content: \"Hello from the bot!\")\n```\n\n### Replying to a Message\nThe `message.reply(_:)` helper sends a message back to the same channel and creates a Discord-style reply (referencing the original message).\n\n```swift\nbot.onMessage { message in\n    if message.content.contains(\"ping\") {\n        try await message.reply(\"Pong!\")\n    }\n}\n```\n\n### Plain Response\nIf you want to send a message back to the same channel without the \"reply\" reference, use `message.respond(_:)`.\n\n```swift\ntry await message.respond(\"I'm responding to you!\")\n```\n\n---\n\n## Editing & Deleting\n\n### Editing a Message\nYou can edit a message the bot has sent using its `id`.\n\n```swift\nlet sentMessage = try await bot.sendMessage(to: \"...\", content: \"Original text\")\ntry await bot.editMessage(channelId: sentMessage.channelId, messageId: sentMessage.id, content: \"Edited text!\")\n```\n\n### Deleting a Message\nLikewise, you can delete a message using its `id`.\n\n```swift\ntry await bot.deleteMessage(channelId: message.channelId, messageId: message.id)\n```\n\n---\n\n## Files & Attachments\n\n> \u26a0\ufe0f **Needs verification:** SWDCK supports sending files via `sendComponentsV2Message` using `DiscordFileUpload` objects.\n\n```swift\nlet file = DiscordFileUpload(filename: \"hello.txt\", data: \"Hello World\".data(using: .utf8)!)\ntry await bot.sendComponentsV2Message(to: message.channelId, components: [], attachments: [file])\n```\n\n> **Next:** [Embeds](./embeds)\n"
}